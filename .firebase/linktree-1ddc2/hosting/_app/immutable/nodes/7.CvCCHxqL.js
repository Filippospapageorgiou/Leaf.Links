import{k as V,q as W,l as X,m as Y,n as Z,i as ee,u as te}from"../chunks/firebase.CPclXUWJ.js";import{H as se}from"../chunks/control.CYgJF_JY.js";import{s as ae,e as v,a as x,t as P,l as ne,c as w,f as d,g as q,b as R,d as A,o as f,r as D,h,i as O,j as G,H as oe,k as le,I as re}from"../chunks/scheduler.BqWbeFoV.js";import{S as ie,i as ce,t as H,e as ue,b as z,c as me,a as _e,m as fe,d as he,g as pe}from"../chunks/index.DRmShFnm.js";import{e as N,U as de,g as ge,a as be}from"../chunks/UserLink.fEjfYUSv.js";function F(r,o){throw new se(r,o)}new TextEncoder;const ke=async({params:r})=>{var m,l;const o=V(ee,"users"),n=W(o,Y("username","==",r.username),X(1)),c=await Z(n),u=(m=c.docs[0])==null?void 0:m.exists(),t=(l=c.docs[0])==null?void 0:l.data();if(!u)throw F(404,"that user does not exist!");if(!t.published)throw F(403,`The profile of @${t.username} is not public!`);return{username:t.username,photoURL:t.photoURL,bio:t.bio,links:t.links??[]}},qe=Object.freeze(Object.defineProperty({__proto__:null,load:ke},Symbol.toStringTag,{value:"Module"}));function J(r,o,n){const c=r.slice();return c[3]=o[n],c}function K(r){let o,n,c,u;const t=[r[3]];let m={};for(let l=0;l<t.length;l+=1)m=re(m,t[l]);return n=new de({props:m}),{c(){o=v("li"),me(n.$$.fragment),c=x()},l(l){o=w(l,"LI",{});var _=R(o);_e(n.$$.fragment,_),c=q(_),_.forEach(d)},m(l,_){O(l,o,_),fe(n,o,null),h(o,c),u=!0},p(l,_){const L=_&1?ge(t,[be(l[3])]):{};n.$set(L)},i(l){u||(H(n.$$.fragment,l),u=!0)},o(l){z(n.$$.fragment,l),u=!1},d(l){l&&d(o),he(n)}}}function ve(r){let o,n,c,u,t,m,l,_=r[0].username+"",L,I,p,$,M,y,U=(r[0].bio??"no bio yet")+"",j,S,b,g;document.title=o="@"+r[0].username+" Links";let k=N(r[0].links),a=[];for(let e=0;e<k.length;e+=1)a[e]=K(J(r,k,e));const Q=e=>z(a[e],1,1,()=>{a[e]=null});return{c(){n=v("meta"),u=x(),t=v("main"),m=v("h1"),l=P("@"),L=P(_),I=x(),p=v("img"),M=x(),y=v("p"),j=P(U),S=x(),b=v("ul");for(let e=0;e<a.length;e+=1)a[e].c();this.h()},l(e){const i=ne("svelte-1yq7ltg",document.head);n=w(i,"META",{name:!0,content:!0}),i.forEach(d),u=q(e),t=w(e,"MAIN",{class:!0});var s=R(t);m=w(s,"H1",{class:!0});var E=R(m);l=A(E,"@"),L=A(E,_),E.forEach(d),I=q(s),p=w(s,"IMG",{src:!0,alt:!0,width:!0,class:!0}),M=q(s),y=w(s,"P",{class:!0});var B=R(y);j=A(B,U),B.forEach(d),S=q(s),b=w(s,"UL",{class:!0});var C=R(b);for(let T=0;T<a.length;T+=1)a[T].l(C);C.forEach(d),s.forEach(d),this.h()},h(){f(n,"name","description"),f(n,"content",c=r[0].bio),f(m,"class","text-7xl text-purple-500 mb-5"),D(p.src,$=r[0].photoURL??"/favicon.png")||f(p,"src",$),f(p,"alt","photoURL"),f(p,"width","256"),f(p,"class","mx-auto my-8"),f(y,"class","text-xl my-8"),f(b,"class","list-one"),f(t,"class","prose text-center mx-auto mt-8")},m(e,i){h(document.head,n),O(e,u,i),O(e,t,i),h(t,m),h(m,l),h(m,L),h(t,I),h(t,p),h(t,M),h(t,y),h(y,j),h(t,S),h(t,b);for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(b,null);g=!0},p(e,[i]){if((!g||i&1)&&o!==(o="@"+e[0].username+" Links")&&(document.title=o),(!g||i&1&&c!==(c=e[0].bio))&&f(n,"content",c),(!g||i&1)&&_!==(_=e[0].username+"")&&G(L,_),(!g||i&1&&!D(p.src,$=e[0].photoURL??"/favicon.png"))&&f(p,"src",$),(!g||i&1)&&U!==(U=(e[0].bio??"no bio yet")+"")&&G(j,U),i&1){k=N(e[0].links);let s;for(s=0;s<k.length;s+=1){const E=J(e,k,s);a[s]?(a[s].p(E,i),H(a[s],1)):(a[s]=K(E),a[s].c(),H(a[s],1),a[s].m(b,null))}for(pe(),s=k.length;s<a.length;s+=1)Q(s);ue()}},i(e){if(!g){for(let i=0;i<k.length;i+=1)H(a[i]);g=!0}},o(e){a=a.filter(Boolean);for(let i=0;i<a.length;i+=1)z(a[i]);g=!1},d(e){e&&(d(u),d(t)),d(n),oe(a,e)}}}function we(r,o,n){let c;le(r,te,t=>n(1,c=t));let{data:u}=o;return r.$$set=t=>{"data"in t&&n(0,u=t.data)},r.$$.update=()=>{r.$$.dirty&2&&`${c==null?void 0:c.username}`},[u,c]}class Re extends ie{constructor(o){super(),ce(this,o,we,ve,ae,{data:0})}}export{Re as component,qe as universal};
