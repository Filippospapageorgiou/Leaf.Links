import{s as ot,e as d,a as B,t as H,c as f,b as x,m as Y,g as D,d as N,f as _,o as p,i as st,h as a,q as nt,E as lt,j as G,n as et,x as it,k as at}from"../chunks/scheduler.BqWbeFoV.js";import{S as ct,i as ut}from"../chunks/index.DRmShFnm.js";import{p as mt}from"../chunks/stores.BKZTAy-F.js";import{p as dt,i as ft,a as pt}from"../chunks/entry.B_CN1Qma.js";import{u as bt}from"../chunks/firebase.CPclXUWJ.js";function ht(t){const e=JSON.parse(t);return e.data&&(e.data=dt(e.data)),e}function rt(t){return HTMLElement.prototype.cloneNode.call(t)}function vt(t,e=()=>{}){const n=async({action:r,result:m,reset:s=!0,invalidateAll:u=!0})=>{m.type==="success"&&(s&&HTMLFormElement.prototype.reset.call(t),u&&await ft()),(location.origin+location.pathname===r.origin+r.pathname||m.type==="redirect"||m.type==="error")&&pt(m)};async function c(r){var g,k,S,y;if(((g=r.submitter)!=null&&g.hasAttribute("formmethod")?r.submitter.formMethod:rt(t).method)!=="post")return;r.preventDefault();const s=new URL((k=r.submitter)!=null&&k.hasAttribute("formaction")?r.submitter.formAction:rt(t).action),u=new FormData(t),b=(S=r.submitter)==null?void 0:S.getAttribute("name");b&&u.append(b,((y=r.submitter)==null?void 0:y.getAttribute("value"))??"");const l=new AbortController;let L=!1;const A=await e({action:s,cancel:()=>L=!0,controller:l,formData:u,formElement:t,submitter:r.submitter})??n;if(L)return;let h;try{const o=await fetch(s,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:u,signal:l.signal});h=ht(await o.text()),h.type==="error"&&(h.status=o.status)}catch(o){if((o==null?void 0:o.name)==="AbortError")return;h={type:"error",error:o}}A({action:s,formData:u,formElement:t,update:o=>n({action:s,result:h,reset:o==null?void 0:o.reset,invalidateAll:o==null?void 0:o.invalidateAll}),result:h})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",c),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",c)}}}function _t(t){var Z;let e,n,c,r="See Profile",m,s,u,b,l=t[0].bio+"",L,O,A,h,g=t[1].status+"",k,S,y,o=(((Z=t[1].form)==null?void 0:Z.problem)??"")+"",F,I,E,T,C,K='<span class="label-text">Your bio</span>',R,w,j,V,M,Q="Update Bio",z,W;return{c(){e=d("main"),n=d("div"),c=d("button"),c.textContent=r,m=B(),s=d("p"),u=H("Current Bio: "),b=d("span"),L=H(l),O=B(),A=d("p"),h=H("Status Code: "),k=H(g),S=B(),y=d("p"),F=H(o),I=B(),E=d("form"),T=d("div"),C=d("label"),C.innerHTML=K,R=B(),w=d("textarea"),V=B(),M=d("button"),M.textContent=Q,this.h()},l(v){e=f(v,"MAIN",{class:!0});var i=x(e);n=f(i,"DIV",{class:!0});var P=x(n);c=f(P,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(c)!=="svelte-1d0yi9"&&(c.textContent=r),m=D(P),s=f(P,"P",{});var J=x(s);u=N(J,"Current Bio: "),b=f(J,"SPAN",{class:!0});var $=x(b);L=N($,l),$.forEach(_),J.forEach(_),P.forEach(_),O=D(i),A=f(i,"P",{});var X=x(A);h=N(X,"Status Code: "),k=N(X,g),X.forEach(_),S=D(i),y=f(i,"P",{class:!0});var tt=x(y);F=N(tt,o),tt.forEach(_),I=D(i),E=f(i,"FORM",{method:!0});var U=x(E);T=f(U,"DIV",{class:!0});var q=x(T);C=f(q,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Y(C)!=="svelte-18jsnk2"&&(C.innerHTML=K),R=D(q),w=f(q,"TEXTAREA",{name:!0,class:!0}),x(w).forEach(_),q.forEach(_),V=D(U),M=f(U,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(M)!=="svelte-tqnit3"&&(M.textContent=Q),U.forEach(_),i.forEach(_),this.h()},h(){p(c,"class","btn btn-link block mx-auto my-4 rounded-full"),p(b,"class","text-info"),p(n,"class","flex justify-between items-center gap-10"),p(y,"class","text-error"),p(C,"for","bio"),p(C,"class","label"),p(w,"name","bio"),p(w,"class","textarea textarea-bordered textarea-accent"),w.value=j=t[0].bio,p(T,"class","form-control"),p(M,"class","btn btn-primary my-5"),p(E,"method","POST"),p(e,"class","max-w-lg prose text-center mx-auto my-6")},m(v,i){st(v,e,i),a(e,n),a(n,c),a(n,m),a(n,s),a(s,u),a(s,b),a(b,L),a(e,O),a(e,A),a(A,h),a(A,k),a(e,S),a(e,y),a(y,F),a(e,I),a(e,E),a(E,T),a(T,C),a(T,R),a(T,w),a(E,V),a(E,M),z||(W=[nt(c,"click",t[4]),lt(vt.call(null,E))],z=!0)},p(v,[i]){var P;i&1&&l!==(l=v[0].bio+"")&&G(L,l),i&2&&g!==(g=v[1].status+"")&&G(k,g),i&2&&o!==(o=(((P=v[1].form)==null?void 0:P.problem)??"")+"")&&G(F,o),i&1&&j!==(j=v[0].bio)&&(w.value=j)},i:et,o:et,d(v){v&&_(e),z=!1,it(W)}}}function yt(t,e,n){let c,r,m;at(t,bt,l=>n(3,r=l)),at(t,mt,l=>n(1,m=l));let{data:s}=e;function u(){window.location.href=c}const b=()=>u();return t.$$set=l=>{"data"in l&&n(0,s=l.data)},t.$$.update=()=>{t.$$.dirty&8&&(c=`/${r==null?void 0:r.username}`)},[s,m,u,r,b]}class Ct extends ct{constructor(e){super(),ut(this,e,yt,_t,ot,{data:0})}}export{Ct as component};
